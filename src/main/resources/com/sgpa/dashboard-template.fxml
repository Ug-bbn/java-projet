<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.String?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.SVGPath?>

<!-- Removed hardcoded controller path since we set it in loader/App or via attribute here -->
<BorderPane fx:id="root" 
            maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" 
            prefHeight="700.0" prefWidth="1200.0" 
            xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.sgpa.controller.DashboardTemplateController">
            
    <left>
        <VBox styleClass="sidebar" BorderPane.alignment="CENTER">
            <padding>
                <Insets bottom="20.0" left="0.0" top="40.0" />
            </padding>
            <VBox alignment="CENTER" spacing="6">
                <StackPane maxWidth="40" maxHeight="40" minWidth="40" minHeight="40"
                           styleClass="logo-icon">
                    <SVGPath content="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-4H6v-2h4V7h2v4h4v2h-4v4z"
                             styleClass="logo-svg" scaleX="1.4" scaleY="1.4"/>
                </StackPane>
                <Label styleClass="logo" text="SGPA" />
            </VBox>
            
            <Label text="MENU" styleClass="menu-title">
                <VBox.margin>
                    <Insets bottom="10.0" top="40.0" />
                </VBox.margin>
            </Label>
            
            <VBox fx:id="vbxMenuNavigation" spacing="10.0">
                <!-- Tableau de bord -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="Tableau de bord" />
                </HBox>

                <!-- MÃ©dicaments -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-4H6v-2h4V7h2v4h4v2h-4v4z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="MÃ©dicaments" />
                </HBox>

                <!-- Ventes -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H6zm12 16H6V4h12v14z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="Ventes" />
                </HBox>

                <!-- Stock -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4v4h8v-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H4V4h16v12z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="Stock" />
                </HBox>

                <!-- Commandes -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 18c-4.55 0-8.25-3.7-8.25-8.25S7.45 3.75 12 3.75 20.25 7.45 20.25 12 16.55 20.25 12 20.25zm1-13h-2v6h6v-2h-4z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="Commandes" />
                </HBox>

                <!-- Utilisateurs -->
                <HBox alignment="CENTER_LEFT" spacing="16.0" styleClass="sidebar-tab">
                    <StackPane maxHeight="20.0" maxWidth="20.0" minHeight="20.0" minWidth="20.0">
                         <SVGPath content="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" styleClass="icon" />
                    </StackPane>
                    <Label styleClass="regular" text="Utilisateurs" />
                </HBox>
            </VBox>
            
            <VBox alignment="BOTTOM_LEFT" VBox.vgrow="ALWAYS" spacing="8" styleClass="sidebar-profile">
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label text="ðŸ“…" styleClass="icon-label"/>
                    <Label fx:id="lblDate" text=""/>
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="8">
                    <Label text="ðŸ‘¤" styleClass="icon-label"/>
                    <Label fx:id="lblUtilisateur" text="" styleClass="label-bold"/>
                </HBox>
                <HBox alignment="CENTER_LEFT" spacing="8" styleClass="sidebar-tab"
                      onMouseClicked="#handleDeconnexion">
                    <Label text="ðŸšª" styleClass="icon-label"/>
                    <Label text="DÃ©connexion" styleClass="error-label"/>
                </HBox>
            </VBox>
        </VBox>
    </left>
    
    <center>
        <StackPane styleClass="background">
             <!-- Top Bar -->
             <StackPane fx:id="stckTopBar" maxHeight="45.0" minHeight="45.0" StackPane.alignment="TOP_LEFT">
                <children>
                   <HBox alignment="CENTER_RIGHT" spacing="10.0">
                      <children>
                         <!-- Theme Switcher (Simple Button for now) -->
                         <StackPane onMouseClicked="#handleThemeSwitch" styleClass="top-bar-icon">
                             <Label text="ðŸŒ—" />
                         </StackPane>
                         
                         <StackPane fx:id="stckMin" styleClass="top-bar-icon">
                            <children>
                               <SVGPath content="M6 12h12v-1.5H6v1.5z" fillRule="EVEN_ODD" scaleX="1.2" scaleY="1.2"/>
                            </children>
                         </StackPane>
                         <StackPane fx:id="stckMax" styleClass="top-bar-icon" onMouseClicked="#handleMaximize">
                            <children>
                               <SVGPath fx:id="svgMax" content="M4 4h16v16H4V4zm2 2v12h12V6H6z" fillRule="EVEN_ODD" scaleX="1.2" scaleY="1.2"/>
                            </children>
                         </StackPane>
                         <StackPane fx:id="stckClose" styleClass="top-bar-icon">
                            <children>
                               <SVGPath content="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" fillRule="EVEN_ODD" scaleX="1.2" scaleY="1.2"/>
                            </children>
                         </StackPane>
                      </children>
                      <padding>
                         <Insets bottom="10.0" left="14.0" right="14.0" top="10.0" />
                      </padding>
                   </HBox>
                </children>
            </StackPane>

            <!-- Content Area -->
            <StackPane fx:id="contentArea">
                <StackPane.margin>
                   <Insets top="45.0" />
                </StackPane.margin>
            </StackPane>
            
        </StackPane>
    </center>
</BorderPane>
